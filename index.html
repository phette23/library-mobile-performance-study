<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Library Mobile Website Performance Study</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>

    <div class="wrapper">
      <header>
        <h1>Library Mobile Website Performance Study</h1>
        <p>Results from a mass analysis of library mobile sites.</p>

        <p class="view">
          <a href="https://github.com/phette23/library-mobile-performance-study">View on GitHub</a>
        </p>


        <ul>
          <li><a href="https://github.com/phette23/library-mobile-performance-study/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/phette23/library-mobile-performance-study/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/phette23/library-mobile-performance-study">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>

      <section>

<h2>Table of Contents</h2>
<nav>
  <ul>
      <li><a href="#introduction">Introduction</a></li>
      <li><a href="#methodology">Methodology</a></li>
      <li><a href="#limitations">Limitations</a></li>
      <li><a href="#results">Results</a></li>
      <li><a href="#references">References</a></li>
    </ul>
</nav>

<h3>
<a name="introduction" class="anchor" href="#introduction"></a>Introduction
</h3>

<p>While many libraries now offer versions of their sites optimized for mobile devices and smaller screens, I wanted to investigate if these sites generally meet user expectations in terms of performance or page load time. While libraries may not have the resources of large web companies like Google and Facebook, those sites still determine user expectations for libraries. Commonly visited sites establish a norm and library sites which load slowly are likely to be perceived as broken or poorly designed.</p>

<p>Web performance is particularly important when considering mobile devices, which have smaller cache sizes, fewer parallel connections, less computing power, and sometimes utilize slower connections such as 3G. <sup><a href="#fn1" id="note1">[1]</a></sup> Furthermore, a study from Compuware actually indicates that users expect sites to load <em>quicker</em> on their smartphones than on a desktop or laptop computer. <sup><a href="#fn2" id="note2">[2]</a></sup> This same study noted that the most common complaint "encountered accessing websites or applications on your mobile phone" was slow load speeds.</p>

<h3>
<a name="methodology" class="anchor" href="#methodology"></a>Methodology
</h3>

<p>To obtain a large sample of library mobile websites, I scraped URLs from <a href="http://www.libsuccess.org/index.php?title=M-Libraries">the M-Libraries page</a> of the Library Success wiki. The script which harvests URLs <a href="https://github.com/phette23/library-mobile-performance-study/blob/master/parse-m-libraries.js">is included in the git repository</a>. It takes the hrefs of all anchors elements in the <q>Mobile interfaces (and/or <abbr title="Online Public Access Catalog">OPACS</abbr>)</q> section, which includes several links to screenshots and other miscellany that I manually removed.</p>

<p>To compare library sites against a common metric that most people would be familiar with, I chose to look up the top ten most-visited websites in the United States <a href="http://www.alexa.com/topsites/countries/US">using Alexa</a>. There are certainly other services which claim to know the top websites, and taking a global view would have resulted in a different set, too.</p>

<p>Alexa doesn't list the top sites specifically for mobile devices, so to determine which of the top ten sites have separate mobile sites I spoofed an iPhone using <code><a href="http://curl.haxx.se/" title="cURL home page">curl</a></code> by running the following:</p>

<pre><code>curl -LIA "Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A523 Safari/8536.25" $URL
</code></pre>

<p>where <code>$URL</code> is the desktop URL listed in Alexa. For the top ten sites, half used the same URL while half redirected to a mobile-specific location, e.g. m.facebook.com.</p>

<p>Already, this introduces slight inaccuracies in a performance analysis because how a user ends up on a mobile page affects their experience. While the way my tests are run assumes users start on their destination URL, that's not necessarily true. At their worst, some of the Alexa sites perform multiple redirects before landing on the mobile URL. Library sites, too, might require a redirect before users get the experience optimized for their device. On the whole, while redirects should only account for a couple HTTP requests at most (and ideally only the first time a user accesses your site on a device), they're still to be avoided and can cause a noticeable page load delay. <sup><a href="#fn3" id="note3">[3]</a></sup></p>

<p>Once I had a list of both mobile library websites and mobile versions of the Alexa top ten, I ran heuristic performance tests using Yahoo!'s YSlow. To run the tests programmatically on hundreds of URLs, I used <a href="http://phantomjs.org/">PhantomJS</a> which runs a headless WebKit browser. To work around any user-agent sniffing sites were doing (e.g. redirecting desktop browsers to a desktop site), I set PhantomJS's user agent string to an iPhone 6. Since tests are heuristic and essentially check to see if a site meets a particular guideline, it doesn't matter that they're run in WebKit as opposed to another rendering engine whose real performance may differ.</p>

<p>The specific YSlow tests recorded were:</p>
<ul>
  <li>Overall grade</li>
  <li>Number of requests</li>
  <li>Number of requests grade</li>
  <li>Compression grade</li>
  <li>JavaScript at the bottom grade <sup><a href="#fn4" id="note4">[4]</a></sup></li>
</ul>

<p>Five of the M-Libraries sites timed out & didn't produce any data. Five out of 135 total sites isn't a bad number.</p>

<!-- TODO: fill in statistical analysis -->

<h3>
<a name="limitations" class="anchor" href="#limitations"></a>Limitations
</h3>

<ul>
  <li>The list of library mobile sites is not comprehensive & self-selecting, as only libraries aware of the Library Success wiki would bother listing their site there.
  <li>Furthermore, there's no guarantee that sites listed are current; URLs may have changed or the institution's may have changed strategies, using a single responsive design for instance.
  <li>Since only the URLs listed in the wiki were tested, this doesn't perform a comprehensive test of any institution's mobile presence. While some places listed a couple URLs, often a home page and a catalog, my method doesn't crawl an entire site while testing each page.
  <li>YSlow
    <ul>
    <li>does not measure what really matters in performance, e.g. the user's experience of how quickly a site loads (which ≠ page load time) & reacts to interaction.
    <li>does measure a number of important aspects which generally correlate with improved performance.
    <li>The subset of YSlow's many metrics is fairly arbitrary, they tend to be things that I personally think are important & easy to understand/improve.
    </ul>
  <li>Responsive design problematizes this study's whole premise. Responsive sites aren't likely to be listed on the Library Success wiki. If a similar sample of self-identified responsive sites of libraries could be obtained, it would be interesting to compare their performance against both library mobile sites and popular sites like the Alexa top ten.
</ul>

<h3>
<a name="results" class="anchor" href="#results"></a>Results
</h3>

<p>Overall, it was evident the best-performing library sites were competitive with the best-performing Alexa sites. The third quartiles of the overall YSlow grades for each set of sites were comparable (93.75 for the Alexa top ten versus 92 for libraries). However, as sites in each data set perform worse, the drop-off was much more significant for libraries. The bottom quartiles of overall YSlow grades were much further apart (a respectable 83 for the Alexa sites versus 62 for libraries).</p>

<!-- TODO: generate with D3, wrap image in noscript tag -->
<p>
  <img src="https://docs.google.com/spreadsheet/oimg?key=0AlVSWa90m8umdHQyaTlfa1ZOZ3hxdFRtandIT2J3RWc&oid=1&zx=fjfwyyg0nz53" alt="Graph of the number of overall YSlow grades of the Alexa top ten versus mobile library sites" />
</p>

<p>Interestingly, library websites actually fared <em>better</em> than the Alexa top ten in terms of using a limited number of HTTP requests. The median for mobile library sites (13.5) was a full three requests fewer than for the Alexa top ten.</p>

<p>
  <img src="https://docs.google.com/spreadsheet/oimg?key=0AlVSWa90m8umdHQyaTlfa1ZOZ3hxdFRtandIT2J3RWc&oid=2&zx=l4a93hrc9mnu" alt="Graph of the number of HTTP requests of the Alexa top ten versus mobile library sites" />
</p>

<p>This was reflected in better performance on the YSlow requests grade as well. In fact, <em>the median score for library sites was a perfect one hundred percent</em>. The Alexa top ten median was 90.5%.</p>

<p>Other than a handful of outliers, the worst of which used an unfathomable <em>ninety-one requests</em> to serve a mobile site, most library sites were very responsible about limiting the number of resources they're serving to devices. However, there were so many outlier sites serving up dozens of requests that the average number of requests for a library site turned out to be greater than the Alexa top ten average (18.05 versus 17.4).</p>

<p>While it's (perhaps) an obvious counterpoint, it's not fair to say that the Alexa top ten use more requests because they're more sophisticated sites serving a greater number of user tasks. Library sites fulfill a number of functions, most notably search and retrieval which puts them in the same category as Google and Yahoo! from the Alexa list, while many of the Alexa sites (Facebook, Twitter) were judged by a simplistic login page rather than their full-feature web applications that use more requests.</p>

<p>Where did library sites fall behind? The GZIP grade showed a distinct advantage to the Alexa top ten.</p>

<p>
  <img src="https://docs.google.com/spreadsheet/oimg?key=0AlVSWa90m8umdHQyaTlfa1ZOZ3hxdFRtandIT2J3RWc&oid=3&zx=nvwa8qp35k8e" alt="Graph of the YSlow GZIP grades of the Alexa top ten versus mobile library sites" />
</p>

<p>While the Alexa sites ensured that most of their text resources were compressed, libraries did not do as good a job (median 100% for Alexa versus a paltry 78% for libraries). This poor result was disappointing because GZIP is one of the easiest performance optimizations to apply; it typically involves adding a small stanza of text to a server configuration file. Once configured, the server never needs to be revisited or maintained.</p>

<h4>Conclusion</h4>

<p>Mobile library sites scraped from the Library Success wiki performed decent in terms of the performance metrics used in this analysis. They were competitive in terms of overall YSlow grade and actually outperformed the Alexa top ten in terms of minimizing HTTP requests. However, the number of libraries using GZIP compression to deliver fewer bytes through the network was disappointing. Libraries should research whether their mobile sites are serving compressed assets and alter their server configuration if they are not. <sup><a href="#fn5" id="note5">[5]</a></sup></p>

<h3>
<a name="references" class="anchor" href="#references"></a>References
</h3>

<ol>
  <li>
    <a href="#note1" id="fn1">^</a> Meenan, Patrick & Matt Welsh. (2012, June 25). "Taming the Mobile Beast." <i>Velocity Conference</i>. <a href="http://www.slideshare.net/patrickmeenan/velocity-2012-taming-the-mobile-beast">http://www.slideshare.net/patrickmeenan/velocity-2012-taming-the-mobile-beast</a>. See slides 22-31 where mobile network performance is analyzed and compared to typical desktop and WiFi connections. The slides also cover cache size, JavaScript execution speed, and HTTP pipelining; Podjarny, Guy. (2011, July 12). "Understanding Mobile Cache Size." <a href="http://www.guypo.com/mobile/understanding-mobile-cache-sizes/">http://www.guypo.com/mobile/understanding-mobile-cache-sizes/</a>; Souders, Steve. (2010, July 12). "Mobile cache file sizes." <a href="http://www.stevesouders.com/blog/2010/07/12/mobile-cache-file-sizes/">http://www.stevesouders.com/blog/2010/07/12/mobile-cache-file-sizes/</a>;
  <li>
    <a href="#note2" id="fn2">^</a> Equat!on Research, Compuware. (2011, July). "What Mobile Users Want."
  <li>
    <a href="#note3" id="fn3">^</a> Souders, Steve. (2008) "Rule 11: Avoid Redirects" in <cite>High Performance Web Sites: Essential Knowledge for Front-End Engineers</cite>. O'Reilly.
  <li>
    <a href="#note4" id="fn4">^</a> This was later discarded because all tests returned 100%, even sites which clearly did not place all their JavaScript at the bottom when manually inspected.
  <li>
    <a href="#note5" id="fn5">^</a> Two good starting points: <a href="http://gzipwtf.com/" title="the easiest way to check GZIP & more">gzipWTF</a> provides an easy means of testing your site for compression while <a href="https://github.com/h5bp/server-configs" title="server-configs | h5bp on GitHub">the Server Configs project</a>—from the people behind the HTML5 Boilerplate—has a nice set of server configuration files which include stanzas that activate HTTP compression.
</ol>

      </section>

      <footer>
        <p>by <a href="https://github.com/phette23">phette23</a></p>
        <p>
          <small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small>
        </p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>

  </body>
</html>
